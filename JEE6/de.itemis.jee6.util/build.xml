<project name="JEE6 Utilities" default="package">
	<property file="${user.home}/.jee6.properties" />
	<property file="${basedir}/build.properties"/>
	<property file="${basedir}/environment.properties"/>

	<property name="jar"           value="jee6-utils.jar"/>
	<property name="bin-path"      value="./bin"/>
	<property name="src-path"      value="./src"/>
	<property name="lib-path"      value="./lib"/>

	<property name="jboss.home"    value="/opt/jboss"/>
	<property name="jboss.lib"     value="${jboss.home}/modules"/>
	<property name="jboss.deploy"  value="${jboss.home}/standalone/deployments"/>

	<!-- ==================================================== -->
	<!--              Setting up classpaths                   -->
	<!-- ==================================================== -->

	<path id="compile.path">
		<fileset dir="${jboss.lib}">
			<include name="**/*.jar"/>
			<exclude name="**/*jsf*1.2*.jar"/>
		</fileset>
	</path>

	<!-- ==================================================== -->
	<!--              Setting up build targets                -->
	<!-- ==================================================== -->

	<target name="clean">
		<delete file="${jar}" />
		<delete dir="${bin-path}" />
	</target>

	<target name="compile">
		<mkdir dir="${bin-path}"/>
		<javac srcdir="${src-path}" destdir="${bin-path}" debug="true" includeantruntime="false">
			<classpath refid="compile.path"/>
		</javac>
	</target>

	<target name="package" depends="compile">
		<jar destfile="${jar}">
			<zipfileset dir="${bin-path}">
				<include name="**/*.class"/>
				<exclude name="**/*Test.class"/>
			</zipfileset>
			<zipfileset dir="${src-path}">
				<include name="**/*.java"/>
				<exclude name="**/*Test.java"/>
			</zipfileset>
		</jar>
	</target>
</project>
