<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<title>JEE6-Generator</title>

<link href="book.css" rel="stylesheet" type="text/css">
<link href="code.css" rel="stylesheet" type="text/css">
<link rel="home" href="documentation.html" title="">
</head>
<body>
<a name="JEE6Generator"></a>
<h1>JEE6-Generator</h1>
<p>
Der JEE-6Generator ist in der Lage, eine komplette JEE6-Web-Applikation aus einem einfachen Modell zu generieren.
Das Framework wurde mit Xtext realisiert und ist als Eclipse-Plugin verfügbar.
</p>
<a name="newproject"></a>
<h2>JEE6-Projekt anlegen</h2>
<p>
Ein neues JEE6-Projekt kann mit der JEE6-Distribution einfach angelegt werden. Dazu muss der Menüpunkt File -&gt; New -&gt; Project...
aufgerufen werden. Im sich öffnenden Dialog wählt man unter dem Punkt Xtext den Punkt JEE6 Generator Project aus:
</p>
<p>
<div class="image" >
<img src="images/NewProject1.png" 
/>
<div class="caption">
</div>
</div>
</p>
<p>
Danach wählt man einen Projektnamen aus:
</p>
<p>
<div class="image" >
<img src="images/NewProject2.png" 
/>
<div class="caption">
</div>
</div>
</p>
<p>
Es wird danach ein Projekt namens "beispiel" angelegt. In diesem Projekt sind alle zum Bau notwendigen Dateien enthalten.
Die JEE6-Distribution enthält auch schon die JBoss-Tools, mit denen die JBoss-Laufzeitumgebung definiert werden kann.
Diese Laufzeitumgebung muss als Library in den Build Path mit aufgenommen werden. Will man das Modell später mit <em>ant</em> bauen,
empfiehlt sich das Anpassen der Datei <em>$HOME/.jee6.properties</em>. Hier muss eingetragen werden, wo sich die JEE6-Distribution
und der benutzte Application Server befindet. Die Variablen lauten:
<ul>
	<li>
		eclipse.home
	</li>
	<li>
		jboss.home
	</li>
	<li>
		glassfish.home
	</li>
</ul>

Dies muss nur ein einziges Mal für alle JEE6-Projekte durchgeführt werden.
</p>
<p>
Die letzten beiden Anmerkungen können in den Dateien $PROJECT_HOME/LiesMich.txt bzw. $PROJECT_HOME/ReadMe.txt nachgelesen werden.
</p>
<a name="improjektentwickeln"></a>
<h2>Im JEE6-Projekt entwickeln</h2>
<p>
Die Datei <em>$PROJECT_HOME/model/beispiel.jee6</em> ist das Modell für unsere Web-Anwendung. Hier sollte die erste Befehlszeile den
eigenen Bedürfnissen angepasst werden. Aus der Befehlszeile
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">application</span>&nbsp;<span class="string">"beispiel"</span>&nbsp;&nbsp;<span class="keyword">context</span>&nbsp;<span class="string">"/beispiel"</span>&nbsp;<span class="keyword">package</span>&nbsp;org.example.jee6.beispiel&nbsp;<span class="keyword">development</span>&nbsp;<span class="keyword">strict</span>;<br/>
...
</p>
</div>
</div>
</p>
<p>
kann z.B. die Package-Definition und der Klartextname der Applikation angepasst werden.
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">application</span>&nbsp;<span class="string">"Eine&nbsp;Beispiel-Applikation"</span>&nbsp;&nbsp;<span class="keyword">context</span>&nbsp;<span class="string">"/beispiel"</span>&nbsp;<span class="keyword">package</span>&nbsp;de.itemis.jee6.beispiel&nbsp;<span class="keyword">development</span>&nbsp;<span class="keyword">strict</span>;<br/>
...
</p>
</div>
</div>
</p>
<p>
Danach kann durch Aufrufen der ant-Targets generate und package die Applikation generiert und die WAR-Datei gebaut werden. Diese
kann mit ant deploy in den passenden Application Server per Hot Deployment installiert werden. Der Generatorlauf erzeugt dabei
folgende Artefakte:
</p>
<p>
<ul>
	<li>
		XHTML Presentation Layer inkl. Logos und CSS
	</li>
	<li>
		Action Handler
	</li>
	<li>
		DAO
	</li>
	<li>
		Entity Beans
	</li>
	<li>
		Resource Bundles für I18N und L10N
	</li>
	<li>
		Eine version.properties für die Versionsnummer.
	</li>
	<li>
		Dateien für Metadaten:
	</li>
	<li>
		
				<ul>
			<li>
				web.xml
			</li>
			<li>
				faces-config.xml
			</li>
			<li>
				jboss-web.xml
			</li>
		</ul>
		
	</li>
</ul>
</p>
<p>
Die Dateien für den XHTML-Presentation Layer werden nur generiert, wenn die dazu benötigte Dateien noch nicht vorhanden sind.
Bestehende Dateien werden durch den Generator nicht überschrieben. Die Action Handler und DAOs werden gemäß dem sog. Generation
Gap Pattern generiert. Die abstrakten Basisklassen werden bei jedem Generatorlauf neu generiert, während die konkreten Klassen
für die Implementierung der Business Logik nur einmal bei Fehlen generiert werden. In der abstrakten Basisklasse der DAOs werden
z.B. die konfigurierten Persistenzkontexte untergebracht. Die generierten Dateien werden in folgende Verzeichnisse hinterlegt:
</p>
<p>
<ul>
	<li>
		src
	</li>
</ul>

In diesem Verzeichnis werden die konkreten Klassen für die Action Handler und DAOs hinterlegt. Ferner werden hier die Resource Bundles und einige Service Klassen hineingeneriert. In diesem Verzeichnis können auch weitere eigene Klassen untergebracht werden. Alles, was hier hineingeneriert wird, wird nicht wieder überschrieben sondern nur angelegt, wenn die Klasse fehlt.
<ul>
	<li>
		src-gen
	</li>
</ul>

Hier werden die abstrakten Klassen und Entity Beans untergebracht. Diese werden bei jedem JEE6-Generatorlauf neu generiert.
<ul>
	<li>
		res
	</li>
</ul>

In diesem Verzeichnis werden bei Projektanlage Bilder und Libraries (JARs) angelegt. Hier können weitere Bilder untergebracht werden. Der JEE6-Generator generiert in diesem Verzeichnis nichts.
<ul>
	<li>
		res-gen
	</li>
</ul>

In diesem Verzeichnis werden die Deployment Deskriptoren generiert. Diese Dateien werden bei jedem JEE6-Generatorlauf neu generiert.
<ul>
	<li>
		WebContent
	</li>
</ul>

Hier werden die XHTML-Dateien und das CSS hineingelegt. Wie im src-Verzeichnis werden hier nur fehlende Dateien angelegt und bestehende nicht überschrieben.
</p>
<p>
<em>Hinweis!</em>
Die Inhalte der Verzeichnisse src, res und WebContent sollten der Verseinsverwaltung der Wahl zugeführt werden, da dort auch eigene Implementierungen untergebracht sein können. Die Inhalte der Verzeichnisse src-gen und res-gen sollten nicht einer Versionsverwaltung zugeführt werden, da sie bei jedem JEE6-Generatorlauf neu generiert werden.
</p>
</body>
</html>
